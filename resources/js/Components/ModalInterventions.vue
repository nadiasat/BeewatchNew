<template>
    <transition name="fade">
      <div class="w-full h-screen fixed left-0 top-0 z-50">
        <div class="bg-black-400 z-30 bg-opacity-60 overflow-hidden h-screen"
             @click="close"></div>
        <div class="w-full h-full max-h-full absolute z-40 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
          <div class="bg-[#F6F5F1] relative w-full h-full overflow-y-scroll flex justify-center" style="min-height: 300px">
            <button @click="() => {close()}" class="
                items-center gap-2 absolute 
                right-5 lg:right-12 top-6 
                rounded-full text-lg 
                flex flex-row
                font-medium hover:opacity-70">
                Fermer
                <svg stroke="#18181b" fill="#18181b" width="24" height="24" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>

            
            
            <div id="tile-container" 
            class="pt-[10vh] pb-[10vh] 
            grid grid-cols-2 lg:grid-cols-3
            auto-rows-min
            auto-cols-min gap-4"
            v-show="showTileContainer">

                <h2 class="text-center text-2xl font-bold col-span-3 pb-8">Nouvelle intervention</h2>

                <!-- QUEEN -->
                <button v-if="hive.is_active" @click="deactivateHive()" class="items-center justify-center col-span-3 flex flex-row gap-1 text-lg font-medium bg-[#AFAC99] rounded-lg hover:opacity-70">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-10">
                        <path d="M39.4991 76.7488C36.2005 74.1782 30.9909 68.6304 28.1103 60.936C28.8773 61.076 29.8558 61.2463 30.9475 61.4166C33.522 61.8182 36.7794 62.2289 39.3747 62.2289C41.9701 62.2289 45.2275 61.8182 47.802 61.4166C48.895 61.2461 49.8747 61.0756 50.6421 60.9355C47.7827 68.6416 42.764 74.1864 39.4991 76.7488ZM51.3705 58.7634C51.1803 58.8004 50.9472 58.8449 50.6776 58.8952C49.88 59.0439 48.7645 59.2422 47.4937 59.4405C44.9376 59.8392 41.8074 60.2289 39.3747 60.2289C36.9421 60.2289 33.8119 59.8392 31.2558 59.4405C29.985 59.2422 28.8695 59.0439 28.0719 58.8952C27.8023 58.8449 27.5692 58.8004 27.379 58.7634C26.6042 56.1787 26.0975 53.387 25.9894 50.4148C26.0756 50.4293 26.1658 50.4443 26.2598 50.4598C27.1747 50.6109 28.4538 50.8124 29.9115 51.014C32.8138 51.4153 36.4721 51.8238 39.3747 51.8238C42.2774 51.8238 45.9357 51.4153 48.838 51.014C50.2957 50.8124 51.5748 50.6109 52.4897 50.4598C52.5837 50.4443 52.6739 50.4293 52.7601 50.4148C52.652 53.387 52.1453 56.1787 51.3705 58.7634ZM52.7751 48.384C52.5963 48.4144 52.3915 48.4489 52.1637 48.4865C51.2619 48.6355 50.0006 48.8342 48.5641 49.0329C45.6782 49.4319 42.133 49.8238 39.3747 49.8238C36.6165 49.8238 33.0713 49.4319 30.1854 49.0329C28.7489 48.8342 27.4876 48.6355 26.5858 48.4865C26.3585 48.449 26.1541 48.4146 25.9756 48.3842C26.0325 45.3621 26.3962 42.8495 26.9541 40.7707C27.0909 40.7959 27.2415 40.8234 27.4046 40.8528C28.2452 41.0041 29.4204 41.2059 30.76 41.4077C33.4251 41.8092 36.7931 42.2192 39.4731 42.2192C42.1532 42.2192 45.5212 41.8092 48.1863 41.4077C49.5259 41.2059 50.7011 41.0041 51.5417 40.8528C51.6895 40.8261 51.827 40.8011 51.9532 40.7778C52.4223 42.8603 52.7273 45.3713 52.7751 48.384ZM51.4345 38.8396C51.3558 38.854 51.2733 38.8689 51.1873 38.8844C50.3609 39.0332 49.205 39.2316 47.8884 39.43C45.2411 39.8289 41.996 40.2192 39.4731 40.2192C36.9503 40.2192 33.7052 39.8289 31.0579 39.43C29.7413 39.2316 28.5854 39.0332 27.759 38.8844C27.6926 38.8725 27.6283 38.8608 27.5663 38.8495C29.6554 33.2623 33.2567 31.5778 35.2375 31.4142C36.0374 31.674 36.8902 31.8141 37.774 31.8141H42.5763C43.4567 31.8141 44.3065 31.6751 45.1038 31.4171C46.6447 31.5914 49.6655 33.2067 51.4345 38.8396Z" fill="#F1B60F" stroke="#18181b" stroke-width="2"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M28.0211 2.68404C28.1957 2.1601 28.762 1.87694 29.286 2.05159C34.0205 3.62975 36.6052 8.28416 37.8053 10.4451C37.8183 10.4686 37.8312 10.4918 37.8439 10.5146C38.1121 10.9974 37.9382 11.6062 37.4554 11.8744C36.9726 12.1426 36.3638 11.9687 36.0956 11.4859C34.8542 9.25133 32.5949 5.26276 28.6535 3.94895C28.1296 3.77431 27.8464 3.20799 28.0211 2.68404Z" fill="black"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M51.5287 2.68404C51.3541 2.1601 50.7878 1.87694 50.2638 2.05159C45.5293 3.62975 42.9446 8.28416 41.7445 10.4451C41.7315 10.4686 41.7186 10.4918 41.7059 10.5146C41.4377 10.9974 41.6116 11.6062 42.0944 11.8744C42.5772 12.1426 43.186 11.9687 43.4542 11.4859C44.6956 9.25133 46.9549 5.26276 50.8963 3.94895C51.4202 3.77431 51.7034 3.20799 51.5287 2.68404Z" fill="black"/>
                        <path d="M67.1353 63.2691C64.9142 64.5515 62.0476 64.4531 59.1166 63.0477C56.191 61.6448 53.3043 58.9759 51.2063 55.342C50.1982 53.5959 49.4539 51.1251 48.9307 48.2185C48.4101 45.3271 48.1204 42.0759 47.9824 38.8155C47.7493 33.305 47.952 27.8223 48.1852 24.1051C51.3099 26.5777 54.9882 29.8701 58.439 33.3886C62.4562 37.4847 66.1116 41.8332 68.2347 45.5106C70.3327 49.1445 71.2008 52.9789 70.9529 56.214C70.7045 59.455 69.3564 61.9868 67.1353 63.2691Z" fill="white" stroke="#18181b" stroke-width="2"/>
                        <path d="M12.8803 63.2691C15.1014 64.5515 17.9681 64.4531 20.899 63.0477C23.8247 61.6448 26.7113 58.9759 28.8093 55.342C29.8175 53.5959 30.5617 51.1251 31.085 48.2185C31.6055 45.3271 31.8953 42.0759 32.0332 38.8155C32.2663 33.305 32.0636 27.8223 31.8304 24.1051C28.7057 26.5777 25.0274 29.8701 21.5767 33.3886C17.5594 37.4847 13.9041 41.8332 11.7809 45.5106C9.68289 49.1445 8.81485 52.9789 9.06276 56.214C9.3111 59.455 10.6592 61.9868 12.8803 63.2691Z" fill="white" stroke="#18181b" stroke-width="2"/>
                        <path d="M33.0002 20.0836L33.0002 16.9169C33.0002 13.1068 36.1244 10.0002 40.0002 10.0002C43.8761 10.0002 47.0002 13.1068 47.0002 16.9169V20.0836C47.0002 23.8937 43.8761 27.0002 40.0002 27.0002C36.1244 27.0002 33.0002 23.8937 33.0002 20.0836Z" fill="#F1B60F" stroke="#18181b" stroke-width="2"/>
                        <path d="M37.3733 19.0081H42.976C47.0218 19.0081 50.3801 22.4578 50.3801 26.8123C50.3801 30.2377 48.2923 33.118 45.4301 34.1778C44.6629 34.4619 43.8375 34.6166 42.976 34.6166H37.3733C36.5119 34.6166 35.6864 34.4619 34.9192 34.1778C32.057 33.118 29.9692 30.2377 29.9692 26.8123C29.9692 22.4578 33.3275 19.0081 37.3733 19.0081Z" fill="white" stroke="#18181b" stroke-width="2"/>
                    </svg>
                    Désactiver la ruche
                </button>

                <button v-else @click="{showQueenForm = true; showTileContainer = false;}" class="items-center justify-center col-span-3 flex flex-row gap-1 text-lg font-medium bg-amber-400 rounded-lg hover:opacity-70">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-10">
                        <path d="M39.4991 76.7488C36.2005 74.1782 30.9909 68.6304 28.1103 60.936C28.8773 61.076 29.8558 61.2463 30.9475 61.4166C33.522 61.8182 36.7794 62.2289 39.3747 62.2289C41.9701 62.2289 45.2275 61.8182 47.802 61.4166C48.895 61.2461 49.8747 61.0756 50.6421 60.9355C47.7827 68.6416 42.764 74.1864 39.4991 76.7488ZM51.3705 58.7634C51.1803 58.8004 50.9472 58.8449 50.6776 58.8952C49.88 59.0439 48.7645 59.2422 47.4937 59.4405C44.9376 59.8392 41.8074 60.2289 39.3747 60.2289C36.9421 60.2289 33.8119 59.8392 31.2558 59.4405C29.985 59.2422 28.8695 59.0439 28.0719 58.8952C27.8023 58.8449 27.5692 58.8004 27.379 58.7634C26.6042 56.1787 26.0975 53.387 25.9894 50.4148C26.0756 50.4293 26.1658 50.4443 26.2598 50.4598C27.1747 50.6109 28.4538 50.8124 29.9115 51.014C32.8138 51.4153 36.4721 51.8238 39.3747 51.8238C42.2774 51.8238 45.9357 51.4153 48.838 51.014C50.2957 50.8124 51.5748 50.6109 52.4897 50.4598C52.5837 50.4443 52.6739 50.4293 52.7601 50.4148C52.652 53.387 52.1453 56.1787 51.3705 58.7634ZM52.7751 48.384C52.5963 48.4144 52.3915 48.4489 52.1637 48.4865C51.2619 48.6355 50.0006 48.8342 48.5641 49.0329C45.6782 49.4319 42.133 49.8238 39.3747 49.8238C36.6165 49.8238 33.0713 49.4319 30.1854 49.0329C28.7489 48.8342 27.4876 48.6355 26.5858 48.4865C26.3585 48.449 26.1541 48.4146 25.9756 48.3842C26.0325 45.3621 26.3962 42.8495 26.9541 40.7707C27.0909 40.7959 27.2415 40.8234 27.4046 40.8528C28.2452 41.0041 29.4204 41.2059 30.76 41.4077C33.4251 41.8092 36.7931 42.2192 39.4731 42.2192C42.1532 42.2192 45.5212 41.8092 48.1863 41.4077C49.5259 41.2059 50.7011 41.0041 51.5417 40.8528C51.6895 40.8261 51.827 40.8011 51.9532 40.7778C52.4223 42.8603 52.7273 45.3713 52.7751 48.384ZM51.4345 38.8396C51.3558 38.854 51.2733 38.8689 51.1873 38.8844C50.3609 39.0332 49.205 39.2316 47.8884 39.43C45.2411 39.8289 41.996 40.2192 39.4731 40.2192C36.9503 40.2192 33.7052 39.8289 31.0579 39.43C29.7413 39.2316 28.5854 39.0332 27.759 38.8844C27.6926 38.8725 27.6283 38.8608 27.5663 38.8495C29.6554 33.2623 33.2567 31.5778 35.2375 31.4142C36.0374 31.674 36.8902 31.8141 37.774 31.8141H42.5763C43.4567 31.8141 44.3065 31.6751 45.1038 31.4171C46.6447 31.5914 49.6655 33.2067 51.4345 38.8396Z" fill="#F1B60F" stroke="#18181b" stroke-width="2"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M28.0211 2.68404C28.1957 2.1601 28.762 1.87694 29.286 2.05159C34.0205 3.62975 36.6052 8.28416 37.8053 10.4451C37.8183 10.4686 37.8312 10.4918 37.8439 10.5146C38.1121 10.9974 37.9382 11.6062 37.4554 11.8744C36.9726 12.1426 36.3638 11.9687 36.0956 11.4859C34.8542 9.25133 32.5949 5.26276 28.6535 3.94895C28.1296 3.77431 27.8464 3.20799 28.0211 2.68404Z" fill="black"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M51.5287 2.68404C51.3541 2.1601 50.7878 1.87694 50.2638 2.05159C45.5293 3.62975 42.9446 8.28416 41.7445 10.4451C41.7315 10.4686 41.7186 10.4918 41.7059 10.5146C41.4377 10.9974 41.6116 11.6062 42.0944 11.8744C42.5772 12.1426 43.186 11.9687 43.4542 11.4859C44.6956 9.25133 46.9549 5.26276 50.8963 3.94895C51.4202 3.77431 51.7034 3.20799 51.5287 2.68404Z" fill="black"/>
                        <path d="M67.1353 63.2691C64.9142 64.5515 62.0476 64.4531 59.1166 63.0477C56.191 61.6448 53.3043 58.9759 51.2063 55.342C50.1982 53.5959 49.4539 51.1251 48.9307 48.2185C48.4101 45.3271 48.1204 42.0759 47.9824 38.8155C47.7493 33.305 47.952 27.8223 48.1852 24.1051C51.3099 26.5777 54.9882 29.8701 58.439 33.3886C62.4562 37.4847 66.1116 41.8332 68.2347 45.5106C70.3327 49.1445 71.2008 52.9789 70.9529 56.214C70.7045 59.455 69.3564 61.9868 67.1353 63.2691Z" fill="white" stroke="#18181b" stroke-width="2"/>
                        <path d="M12.8803 63.2691C15.1014 64.5515 17.9681 64.4531 20.899 63.0477C23.8247 61.6448 26.7113 58.9759 28.8093 55.342C29.8175 53.5959 30.5617 51.1251 31.085 48.2185C31.6055 45.3271 31.8953 42.0759 32.0332 38.8155C32.2663 33.305 32.0636 27.8223 31.8304 24.1051C28.7057 26.5777 25.0274 29.8701 21.5767 33.3886C17.5594 37.4847 13.9041 41.8332 11.7809 45.5106C9.68289 49.1445 8.81485 52.9789 9.06276 56.214C9.3111 59.455 10.6592 61.9868 12.8803 63.2691Z" fill="white" stroke="#18181b" stroke-width="2"/>
                        <path d="M33.0002 20.0836L33.0002 16.9169C33.0002 13.1068 36.1244 10.0002 40.0002 10.0002C43.8761 10.0002 47.0002 13.1068 47.0002 16.9169V20.0836C47.0002 23.8937 43.8761 27.0002 40.0002 27.0002C36.1244 27.0002 33.0002 23.8937 33.0002 20.0836Z" fill="#F1B60F" stroke="#18181b" stroke-width="2"/>
                        <path d="M37.3733 19.0081H42.976C47.0218 19.0081 50.3801 22.4578 50.3801 26.8123C50.3801 30.2377 48.2923 33.118 45.4301 34.1778C44.6629 34.4619 43.8375 34.6166 42.976 34.6166H37.3733C36.5119 34.6166 35.6864 34.4619 34.9192 34.1778C32.057 33.118 29.9692 30.2377 29.9692 26.8123C29.9692 22.4578 33.3275 19.0081 37.3733 19.0081Z" fill="white" stroke="#18181b" stroke-width="2"/>
                    </svg>
                    Relancer la ruche
                </button>

                <!-- FOOD -->
                <div v-if="hive.is_active" class="items-center justify-center col-span-3 flex flex-row">
                    <!-- Make  button like above but for food-->
                    <button v-if="hive.food" @click="removeFood()" class="items-center justify-center w-full flex flex-row gap-2 text-lg font-medium bg-[#AFAC99] rounded-lg hover:opacity-70">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-9">
                            <path d="M74.8078 68.5691C74.8078 72.0145 72.0147 74.8076 68.5692 74.8076H11.5308C8.08534 74.8076 5.29224 72.0145 5.29224 68.5691V43.9119L7.07469 42.0061C13.3541 39.6909 18.3793 38.7391 23.3657 38.865C28.6526 38.9986 33.8309 40.3433 40.3247 42.4475L40.3511 42.4561L40.3769 42.4662C46.6935 44.9565 51.5709 46.408 56.5557 46.5291C61.3978 46.6467 66.4207 45.5097 73.0254 42.7076H74.8078V68.5691Z" fill="#F1B60F"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5298 19.7746C9.06877 19.7746 7.07369 21.7696 7.07369 24.2307V42.0062C13.3531 39.691 18.3783 38.7392 23.3647 38.8651C28.6516 38.9986 33.8299 40.3434 40.3237 42.4476L40.3501 42.4561L40.3759 42.4663C46.6925 44.9565 51.5699 46.4081 56.5547 46.5292C61.3968 46.6468 66.4197 45.5098 73.0244 42.7076V24.2307C73.0244 21.7696 71.0293 19.7746 68.5682 19.7746H11.5298Z" fill="white"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5298 17.9921H68.5682C72.0137 17.9921 74.8068 20.7852 74.8068 24.2307V42.7076V68.5691C74.8068 72.0146 72.0137 74.8077 68.5682 74.8077H11.5298C8.08435 74.8077 5.29124 72.0146 5.29124 68.5691V43.9119V24.2307C5.29124 20.7852 8.08434 17.9921 11.5298 17.9921ZM11.5298 19.7746C9.06877 19.7746 7.07369 21.7696 7.07369 24.2307V42.0062C13.3531 39.691 18.3783 38.7392 23.3647 38.8651C28.6516 38.9986 33.8299 40.3434 40.3237 42.4476L40.3501 42.4561L40.3759 42.4663C46.6925 44.9565 51.5699 46.4081 56.5547 46.5292C61.3968 46.6468 66.4197 45.5098 73.0244 42.7076V24.2307C73.0244 21.7696 71.0293 19.7746 68.5682 19.7746H11.5298ZM73.0244 44.6402C66.6097 47.2935 61.5126 48.4326 56.5115 48.3111C51.2106 48.1823 46.1012 46.6381 39.748 44.1347C33.297 42.0453 28.3295 40.7735 23.3197 40.647C18.462 40.5243 13.5031 41.478 7.07369 43.9089V68.5691C7.07369 71.0302 9.06877 73.0252 11.5298 73.0252H68.5682C71.0293 73.0252 73.0244 71.0302 73.0244 68.5691V44.6402Z" fill="#181818"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.46056 7.07461C8.14233 7.07461 7.07369 8.14325 7.07369 9.46148V14.1724C7.07369 16.282 8.78383 17.9921 10.8934 17.9921H69.2047C71.3142 17.9921 73.0244 16.282 73.0244 14.1724V9.46148C73.0244 8.14325 71.9557 7.07461 70.6375 7.07461H9.46056Z" fill="white"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.46056 5.29216H70.6375C72.9401 5.29216 74.8068 7.15883 74.8068 9.46148V14.1724C74.8068 17.2664 72.2986 19.7746 69.2047 19.7746H10.8934C7.79941 19.7746 5.29124 17.2664 5.29124 14.1724V9.46148C5.29124 7.15883 7.15791 5.29216 9.46056 5.29216ZM9.46056 7.07461C8.14233 7.07461 7.07369 8.14325 7.07369 9.46148V14.1724C7.07369 16.282 8.78383 17.9921 10.8934 17.9921H69.2047C71.3142 17.9921 73.0244 16.282 73.0244 14.1724V9.46148C73.0244 8.14325 71.9557 7.07461 70.6375 7.07461H9.46056Z" fill="#181818"/>
                        </svg>
                        Retirer la nourriture
                    </button>

                    <button v-else @click="addFood()" class="items-center justify-center w-full flex flex-row gap-2 text-lg font-medium bg-amber-400 rounded-lg hover:opacity-70">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-9">
                            <path d="M74.8078 68.5691C74.8078 72.0145 72.0147 74.8076 68.5692 74.8076H11.5308C8.08534 74.8076 5.29224 72.0145 5.29224 68.5691V43.9119L7.07469 42.0061C13.3541 39.6909 18.3793 38.7391 23.3657 38.865C28.6526 38.9986 33.8309 40.3433 40.3247 42.4475L40.3511 42.4561L40.3769 42.4662C46.6935 44.9565 51.5709 46.408 56.5557 46.5291C61.3978 46.6467 66.4207 45.5097 73.0254 42.7076H74.8078V68.5691Z" fill="#F1B60F"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5298 19.7746C9.06877 19.7746 7.07369 21.7696 7.07369 24.2307V42.0062C13.3531 39.691 18.3783 38.7392 23.3647 38.8651C28.6516 38.9986 33.8299 40.3434 40.3237 42.4476L40.3501 42.4561L40.3759 42.4663C46.6925 44.9565 51.5699 46.4081 56.5547 46.5292C61.3968 46.6468 66.4197 45.5098 73.0244 42.7076V24.2307C73.0244 21.7696 71.0293 19.7746 68.5682 19.7746H11.5298Z" fill="white"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5298 17.9921H68.5682C72.0137 17.9921 74.8068 20.7852 74.8068 24.2307V42.7076V68.5691C74.8068 72.0146 72.0137 74.8077 68.5682 74.8077H11.5298C8.08435 74.8077 5.29124 72.0146 5.29124 68.5691V43.9119V24.2307C5.29124 20.7852 8.08434 17.9921 11.5298 17.9921ZM11.5298 19.7746C9.06877 19.7746 7.07369 21.7696 7.07369 24.2307V42.0062C13.3531 39.691 18.3783 38.7392 23.3647 38.8651C28.6516 38.9986 33.8299 40.3434 40.3237 42.4476L40.3501 42.4561L40.3759 42.4663C46.6925 44.9565 51.5699 46.4081 56.5547 46.5292C61.3968 46.6468 66.4197 45.5098 73.0244 42.7076V24.2307C73.0244 21.7696 71.0293 19.7746 68.5682 19.7746H11.5298ZM73.0244 44.6402C66.6097 47.2935 61.5126 48.4326 56.5115 48.3111C51.2106 48.1823 46.1012 46.6381 39.748 44.1347C33.297 42.0453 28.3295 40.7735 23.3197 40.647C18.462 40.5243 13.5031 41.478 7.07369 43.9089V68.5691C7.07369 71.0302 9.06877 73.0252 11.5298 73.0252H68.5682C71.0293 73.0252 73.0244 71.0302 73.0244 68.5691V44.6402Z" fill="#181818"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.46056 7.07461C8.14233 7.07461 7.07369 8.14325 7.07369 9.46148V14.1724C7.07369 16.282 8.78383 17.9921 10.8934 17.9921H69.2047C71.3142 17.9921 73.0244 16.282 73.0244 14.1724V9.46148C73.0244 8.14325 71.9557 7.07461 70.6375 7.07461H9.46056Z" fill="white"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.46056 5.29216H70.6375C72.9401 5.29216 74.8068 7.15883 74.8068 9.46148V14.1724C74.8068 17.2664 72.2986 19.7746 69.2047 19.7746H10.8934C7.79941 19.7746 5.29124 17.2664 5.29124 14.1724V9.46148C5.29124 7.15883 7.15791 5.29216 9.46056 5.29216ZM9.46056 7.07461C8.14233 7.07461 7.07369 8.14325 7.07369 9.46148V14.1724C7.07369 16.282 8.78383 17.9921 10.8934 17.9921H69.2047C71.3142 17.9921 73.0244 16.282 73.0244 14.1724V9.46148C73.0244 8.14325 71.9557 7.07461 70.6375 7.07461H9.46056Z" fill="#181818"/>
                        </svg>
                        Nourrir la ruche
                    </button>
                </div>

                <div v-else class="items-center justify-center col-span-3 flex flex-row">
                    <button  class="items-center justify-center w-full flex flex-row gap-2 text-lg font-medium bg-[#AFAC99] rounded-lg cursor-default">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-9">
                            <path d="M74.8078 68.5691C74.8078 72.0145 72.0147 74.8076 68.5692 74.8076H11.5308C8.08534 74.8076 5.29224 72.0145 5.29224 68.5691V43.9119L7.07469 42.0061C13.3541 39.6909 18.3793 38.7391 23.3657 38.865C28.6526 38.9986 33.8309 40.3433 40.3247 42.4475L40.3511 42.4561L40.3769 42.4662C46.6935 44.9565 51.5709 46.408 56.5557 46.5291C61.3978 46.6467 66.4207 45.5097 73.0254 42.7076H74.8078V68.5691Z" fill="#F1B60F"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5298 19.7746C9.06877 19.7746 7.07369 21.7696 7.07369 24.2307V42.0062C13.3531 39.691 18.3783 38.7392 23.3647 38.8651C28.6516 38.9986 33.8299 40.3434 40.3237 42.4476L40.3501 42.4561L40.3759 42.4663C46.6925 44.9565 51.5699 46.4081 56.5547 46.5292C61.3968 46.6468 66.4197 45.5098 73.0244 42.7076V24.2307C73.0244 21.7696 71.0293 19.7746 68.5682 19.7746H11.5298Z" fill="white"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5298 17.9921H68.5682C72.0137 17.9921 74.8068 20.7852 74.8068 24.2307V42.7076V68.5691C74.8068 72.0146 72.0137 74.8077 68.5682 74.8077H11.5298C8.08435 74.8077 5.29124 72.0146 5.29124 68.5691V43.9119V24.2307C5.29124 20.7852 8.08434 17.9921 11.5298 17.9921ZM11.5298 19.7746C9.06877 19.7746 7.07369 21.7696 7.07369 24.2307V42.0062C13.3531 39.691 18.3783 38.7392 23.3647 38.8651C28.6516 38.9986 33.8299 40.3434 40.3237 42.4476L40.3501 42.4561L40.3759 42.4663C46.6925 44.9565 51.5699 46.4081 56.5547 46.5292C61.3968 46.6468 66.4197 45.5098 73.0244 42.7076V24.2307C73.0244 21.7696 71.0293 19.7746 68.5682 19.7746H11.5298ZM73.0244 44.6402C66.6097 47.2935 61.5126 48.4326 56.5115 48.3111C51.2106 48.1823 46.1012 46.6381 39.748 44.1347C33.297 42.0453 28.3295 40.7735 23.3197 40.647C18.462 40.5243 13.5031 41.478 7.07369 43.9089V68.5691C7.07369 71.0302 9.06877 73.0252 11.5298 73.0252H68.5682C71.0293 73.0252 73.0244 71.0302 73.0244 68.5691V44.6402Z" fill="#181818"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.46056 7.07461C8.14233 7.07461 7.07369 8.14325 7.07369 9.46148V14.1724C7.07369 16.282 8.78383 17.9921 10.8934 17.9921H69.2047C71.3142 17.9921 73.0244 16.282 73.0244 14.1724V9.46148C73.0244 8.14325 71.9557 7.07461 70.6375 7.07461H9.46056Z" fill="white"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.46056 5.29216H70.6375C72.9401 5.29216 74.8068 7.15883 74.8068 9.46148V14.1724C74.8068 17.2664 72.2986 19.7746 69.2047 19.7746H10.8934C7.79941 19.7746 5.29124 17.2664 5.29124 14.1724V9.46148C5.29124 7.15883 7.15791 5.29216 9.46056 5.29216ZM9.46056 7.07461C8.14233 7.07461 7.07369 8.14325 7.07369 9.46148V14.1724C7.07369 16.282 8.78383 17.9921 10.8934 17.9921H69.2047C71.3142 17.9921 73.0244 16.282 73.0244 14.1724V9.46148C73.0244 8.14325 71.9557 7.07461 70.6375 7.07461H9.46056Z" fill="#181818"/>
                        </svg>
                        Retirer la nourriture
                    </button>
                </div>

                <!-- CONTROL -->
                <div v-if="hive.is_active"
                id="tile-control" 
                class="tile-intervention 
                p-6 flex flex-col gap-4 items-center 
                rounded-xl w-40 h-40 
                hover:opacity-60 cursor-pointer"
                :class="[hive.is_active ? 'bg-amber-400' : 'bg-[#AFAC99]']"
                @click="()=>{showControlForm = true; showTileContainer = false;}">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="12" y="6" width="56" height="71" rx="5" fill="white" stroke="black" stroke-width="2"/>
                        <path d="M22 20L59 20" stroke="black" stroke-width="2" stroke-linecap="round"/>
                        <path d="M22 32L59 32" stroke="black" stroke-width="2" stroke-linecap="round"/>
                        <path d="M22 45L59 45" stroke="black" stroke-width="2" stroke-linecap="round"/>
                        <path d="M59 57L50.1579 66L45 60.75" stroke="#18181b" stroke-width="2" stroke-linecap="round"/>
                        <rect x="21" y="3" width="38" height="6" rx="2" fill="#F1B60F" stroke="black" stroke-width="2"/>
                    </svg>

                    <p>Contrôle</p>
                </div>
                <div v-else
                id="tile-control" 
                class="tile-intervention 
                p-6 flex flex-col gap-4 items-center 
                rounded-xl w-40 h-40 
                bg-[#AFAC99]">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="12" y="6" width="56" height="71" rx="5" fill="white" stroke="black" stroke-width="2"/>
                        <path d="M22 20L59 20" stroke="black" stroke-width="2" stroke-linecap="round"/>
                        <path d="M22 32L59 32" stroke="black" stroke-width="2" stroke-linecap="round"/>
                        <path d="M22 45L59 45" stroke="black" stroke-width="2" stroke-linecap="round"/>
                        <path d="M59 57L50.1579 66L45 60.75" stroke="#18181b" stroke-width="2" stroke-linecap="round"/>
                        <rect x="21" y="3" width="38" height="6" rx="2" fill="#F1B60F" stroke="black" stroke-width="2"/>
                    </svg>

                    <p>Contrôle</p>
                </div>
                
                <!-- MATERIAL -->
                <div v-if="hive.is_active"
                id="tile-material" 
                class="tile-intervention
                p-6 flex flex-col gap-4 items-center 
                rounded-xl w-40 h-40 
                hover:opacity-60  cursor-pointer"
                :class="[hive.is_active ? 'bg-amber-400' : 'bg-[#AFAC99]']"
                @click="()=>{showMaterialForm = true; showTileContainer = false;}">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_306_31)">
                            <path d="M72.9999 78H49.8258H26.6516C23.3379 78 20.6516 75.3137 20.6516 72V56.5361V35.0722H78.9999V56.5361V72C78.9999 75.3137 76.3136 78 72.9999 78Z" fill="white"/>
                            <path d="M20.6516 56.5361V35.0722H78.9999V56.5361M20.6516 56.5361V72C20.6516 75.3137 23.3379 78 26.6516 78H49.8258H72.9999C76.3136 78 78.9999 75.3137 78.9999 72V56.5361M20.6516 56.5361H78.9999" stroke="#18181b" stroke-width="2"/>
                            <path d="M63.9178 2.4327L35.3081 3.50968C34.9739 3.52227 34.6483 3.62057 34.3619 3.79537L9.84861 18.7573L14.0637 33.0444L68.1329 16.7199L63.9178 2.4327Z" fill="#F1B60F"/>
                            <path d="M63.902 2.37905L63.9178 2.4327M63.9178 2.4327L35.3081 3.50968C34.9739 3.52227 34.6483 3.62057 34.3619 3.79537L9.84861 18.7573M63.9178 2.4327L75.4122 2M63.9178 2.4327L68.1329 16.7199L14.0637 33.0444L9.84861 18.7573M9.83279 18.7036L9.84861 18.7573M9.84861 18.7573L0 24.7685" stroke="#18181b" stroke-width="2"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_306_31">
                                <rect width="80" height="80" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>

                    <p>Matériel</p>
                </div>
                <div v-else
                id="tile-material" 
                class="tile-intervention
                p-6 flex flex-col gap-4 items-center 
                rounded-xl w-40 h-40 
                bg-[#AFAC99]">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_306_31)">
                            <path d="M72.9999 78H49.8258H26.6516C23.3379 78 20.6516 75.3137 20.6516 72V56.5361V35.0722H78.9999V56.5361V72C78.9999 75.3137 76.3136 78 72.9999 78Z" fill="white"/>
                            <path d="M20.6516 56.5361V35.0722H78.9999V56.5361M20.6516 56.5361V72C20.6516 75.3137 23.3379 78 26.6516 78H49.8258H72.9999C76.3136 78 78.9999 75.3137 78.9999 72V56.5361M20.6516 56.5361H78.9999" stroke="#18181b" stroke-width="2"/>
                            <path d="M63.9178 2.4327L35.3081 3.50968C34.9739 3.52227 34.6483 3.62057 34.3619 3.79537L9.84861 18.7573L14.0637 33.0444L68.1329 16.7199L63.9178 2.4327Z" fill="#F1B60F"/>
                            <path d="M63.902 2.37905L63.9178 2.4327M63.9178 2.4327L35.3081 3.50968C34.9739 3.52227 34.6483 3.62057 34.3619 3.79537L9.84861 18.7573M63.9178 2.4327L75.4122 2M63.9178 2.4327L68.1329 16.7199L14.0637 33.0444L9.84861 18.7573M9.83279 18.7036L9.84861 18.7573M9.84861 18.7573L0 24.7685" stroke="#18181b" stroke-width="2"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_306_31">
                                <rect width="80" height="80" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>

                    <p>Matériel</p>
                </div>

                <!-- TREATMENT -->
                <div v-if="hive.is_active"
                id="tile-treatment" 
                class="tile-intervention
                p-6 flex flex-col gap-4 items-center 
                rounded-xl w-40 h-40 
                hover:opacity-60  cursor-pointer"
                :class="[hive.is_active ? 'bg-amber-400' : 'bg-[#AFAC99]']"
                @click="()=>{showTreatmentForm = true; showTileContainer = false;}">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M36 7.3094C38.4752 5.88034 41.5248 5.88034 44 7.3094L66.3109 20.1906C68.7861 21.6197 70.3109 24.2607 70.3109 27.1188V52.8812C70.3109 55.7393 68.7861 58.3803 66.3109 59.8094L44 72.6906C41.5248 74.1197 38.4752 74.1197 36 72.6906L13.6891 59.8094C11.2139 58.3803 9.68911 55.7393 9.68911 52.8812V27.1188C9.68911 24.2607 11.2139 21.6197 13.6891 20.1906L36 7.3094Z" fill="white" stroke="#181818" stroke-width="2"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M33 21.3333C33 20.0447 34.0447 19 35.3333 19H44.6667C45.9553 19 47 20.0447 47 21.3333V33H58.6667C59.9553 33 61 34.0447 61 35.3333V44.6667C61 45.9553 59.9553 47 58.6667 47H47V58.6667C47 59.9553 45.9553 61 44.6667 61H35.3333C34.0447 61 33 59.9553 33 58.6667L33 47L21.3333 47C20.0447 47 19 45.9553 19 44.6667V35.3333C19 34.0447 20.0447 33 21.3333 33L33 33L33 21.3333Z" fill="#F1B60F"/>
                            <path d="M34.1667 34.3667H34.3667V34.1667L34.3667 21.3333C34.3667 20.7995 34.7995 20.3667 35.3333 20.3667H44.6667C45.2005 20.3667 45.6333 20.7995 45.6333 21.3333V34.1667V34.3667H45.8333H58.6667C59.2005 34.3667 59.6333 34.7995 59.6333 35.3333V44.6667C59.6333 45.2005 59.2005 45.6333 58.6667 45.6333H45.8333H45.6333V45.8333V58.6667C45.6333 59.2005 45.2005 59.6333 44.6667 59.6333H35.3333C34.7995 59.6333 34.3667 59.2005 34.3667 58.6667L34.3667 45.8333V45.6333H34.1667L21.3333 45.6333C20.7995 45.6333 20.3667 45.2005 20.3667 44.6667V35.3333C20.3667 34.7995 20.7995 34.3667 21.3333 34.3667L34.1667 34.3667ZM35.3333 18.8C33.9342 18.8 32.8 19.9342 32.8 21.3333L32.8 32.8L21.3333 32.8C19.9342 32.8 18.8 33.9342 18.8 35.3333V44.6667C18.8 46.0658 19.9342 47.2 21.3333 47.2L32.8 47.2L32.8 58.6667C32.8 60.0658 33.9342 61.2 35.3333 61.2H44.6667C46.0658 61.2 47.2 60.0658 47.2 58.6667V47.2H58.6667C60.0658 47.2 61.2 46.0658 61.2 44.6667V35.3333C61.2 33.9342 60.0658 32.8 58.6667 32.8H47.2V21.3333C47.2 19.9342 46.0658 18.8 44.6667 18.8H35.3333Z" fill="#181818" stroke="#181818" stroke-width="0.4"/>
                    </svg>
                    <p>Traitement</p>
                </div>
                <div v-else
                id="tile-treatment" 
                class="tile-intervention
                p-6 flex flex-col gap-4 items-center 
                rounded-xl w-40 h-40 
                bg-[#AFAC99]">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M36 7.3094C38.4752 5.88034 41.5248 5.88034 44 7.3094L66.3109 20.1906C68.7861 21.6197 70.3109 24.2607 70.3109 27.1188V52.8812C70.3109 55.7393 68.7861 58.3803 66.3109 59.8094L44 72.6906C41.5248 74.1197 38.4752 74.1197 36 72.6906L13.6891 59.8094C11.2139 58.3803 9.68911 55.7393 9.68911 52.8812V27.1188C9.68911 24.2607 11.2139 21.6197 13.6891 20.1906L36 7.3094Z" fill="white" stroke="#181818" stroke-width="2"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M33 21.3333C33 20.0447 34.0447 19 35.3333 19H44.6667C45.9553 19 47 20.0447 47 21.3333V33H58.6667C59.9553 33 61 34.0447 61 35.3333V44.6667C61 45.9553 59.9553 47 58.6667 47H47V58.6667C47 59.9553 45.9553 61 44.6667 61H35.3333C34.0447 61 33 59.9553 33 58.6667L33 47L21.3333 47C20.0447 47 19 45.9553 19 44.6667V35.3333C19 34.0447 20.0447 33 21.3333 33L33 33L33 21.3333Z" fill="#F1B60F"/>
                            <path d="M34.1667 34.3667H34.3667V34.1667L34.3667 21.3333C34.3667 20.7995 34.7995 20.3667 35.3333 20.3667H44.6667C45.2005 20.3667 45.6333 20.7995 45.6333 21.3333V34.1667V34.3667H45.8333H58.6667C59.2005 34.3667 59.6333 34.7995 59.6333 35.3333V44.6667C59.6333 45.2005 59.2005 45.6333 58.6667 45.6333H45.8333H45.6333V45.8333V58.6667C45.6333 59.2005 45.2005 59.6333 44.6667 59.6333H35.3333C34.7995 59.6333 34.3667 59.2005 34.3667 58.6667L34.3667 45.8333V45.6333H34.1667L21.3333 45.6333C20.7995 45.6333 20.3667 45.2005 20.3667 44.6667V35.3333C20.3667 34.7995 20.7995 34.3667 21.3333 34.3667L34.1667 34.3667ZM35.3333 18.8C33.9342 18.8 32.8 19.9342 32.8 21.3333L32.8 32.8L21.3333 32.8C19.9342 32.8 18.8 33.9342 18.8 35.3333V44.6667C18.8 46.0658 19.9342 47.2 21.3333 47.2L32.8 47.2L32.8 58.6667C32.8 60.0658 33.9342 61.2 35.3333 61.2H44.6667C46.0658 61.2 47.2 60.0658 47.2 58.6667V47.2H58.6667C60.0658 47.2 61.2 46.0658 61.2 44.6667V35.3333C61.2 33.9342 60.0658 32.8 58.6667 32.8H47.2V21.3333C47.2 19.9342 46.0658 18.8 44.6667 18.8H35.3333Z" fill="#181818" stroke="#181818" stroke-width="0.4"/>
                    </svg>
                    <p>Traitement</p>
                </div>

            
            </div>

            <!-- CONTROL FORM -->
            <div id="control-form-container" 
            class="pt-[10vh] pb-[10vh] w-[90vw] lg:w-[35vw]"
            v-show="showControlForm">
                <h2 class="text-center text-2xl font-bold pb-8 text-zinc-900">Formulaire de contrôle</h2>
                <form id="control-form" @submit.prevent="newControl()" class="mx-8">
                    <BreezeLabel value="Avez-vous aperçu la reine ?" class=" font-bold text-base mt-4 lg:mt-0 text-zinc-900 "/>
                    <!-- make 2 radio buttons yes or no -->
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_glimpse">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.glimpse_queen" type="radio" id="yes_glimpse" name="glimpse_queen" value="true" >
                            Oui
                        </label>
                        <label for="no_glimpse">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.glimpse_queen" type="radio" id="no_glimpse" name="glimpse_queen" value="false">
                            Non
                        </label>
                    </div>

                    <BreezeLabel value="La reine a-t-elle pondu ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_laid">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.queen_laid" type="radio" id="yes_laid" name="queen_laid" value="true" >
                            Oui
                        </label>
                        <label for="no_laid">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.queen_laid" type="radio" id="no_laid" name="queen_laid" value="false">
                            Non
                        </label>
                    </div>
                    
                    <BreezeLabel value="Y a-t-il du couvain ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900" />
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_brood">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.brood" type="radio" id="yes_brood" name="brood" value="true" >
                            Oui
                        </label>
                        <label for="no_brood">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.brood" type="radio" id="no_brood" name="brood" value="false">
                            Non
                        </label>
                    </div>

                    <BreezeLabel value="Les cadres sont-ils pleins ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_frames">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.frames_full" type="radio" id="yes_frames" name="frames_full" value="true" >
                            Oui
                        </label>
                        <label for="no_frames">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.frames_full" type="radio" id="no_frames" name="frames_full" value="false">
                            Non
                        </label>
                    </div>

                    <BreezeLabel value="Y a-t-il du miel ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_honey">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.honey" type="radio" id="yes_honey" name="honey" value="true" >
                            Oui
                        </label>
                        <label for="no_honey">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.honey" type="radio" id="no_honey" name="honey" value="false">
                            Non
                        </label>
                    </div>

                    <BreezeLabel value="Y a-t-il du miel sur les cadres de la hausse ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_honey_rise">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.honey_rise" type="radio" id="yes_honey_rise" name="honey_rise" value="true" >
                            Oui
                        </label>
                        <label for="no_honey_rise">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.honey_rise" type="radio" id="no_honey_rise" name="honey_rise" value="false">
                            Non
                        </label>
                    </div>

                    <BreezeLabel value="Le miel est-t-il operculé ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_sealed_honey">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.sealed_honey" type="radio" id="yes_sealed_honey" name="sealed_honey" value="true" >
                            Oui
                        </label>
                        <label for="no_sealed_honey">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.sealed_honey" type="radio" id="no_sealed_honey" name="sealed_honey" value="false">
                            Non
                        </label>
                    </div>

                    <BreezeLabel value="Y a-t-il beaucoup de cellules males ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_male_cells">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.male_cells" type="radio" id="yes_male_cells" name="male_cells" value="true" >
                            Oui
                        </label>
                        <label for="no_male_cells">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.male_cells" type="radio" id="no_male_cells" name="male_cells" value="false">
                            Non
                        </label>
                    </div>

                    <BreezeLabel value="Avez-vous aperçu et éliminé des cellules de futures reines ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_eliminate_queen_cells">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.eliminate_queen_cells" type="radio" id="yes_eliminate_queen_cells" name="eliminate_queen_cells" value="true" >
                            Oui
                        </label>
                        <label for="no_eliminate_queen_cells">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.eliminate_queen_cells" type="radio" id="no_eliminate_queen_cells" name="eliminate_queen_cells" value="false">
                            Non
                        </label>
                    </div>

                    <BreezeLabel value="La plaque sous les ruchers a-t-elle été nettoyée ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes_clean_plate">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.clean_plate" type="radio" id="yes_clean_plate" name="clean_plate" value="true" >
                            Oui
                        </label>
                        <label for="no_eclean_plate">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="createControlForm.clean_plate" type="radio" id="no_clean_plate" name="clean_plate" value="false">
                            Non
                        </label>
                    </div>
                    
                    <BreezeLabel for="nb_varroa" value="Nombre de varroas" class=" font-bold text-base mt-4 lg:mt-0 text-zinc-900 "/>
                    <BreezeInput v-model="createControlForm.nb_varroa" placeholder="25" id="nb_varroa" type="number" min="0" max="500"
                                class="mt-1 block w-full"/>

                    <BreezeLabel for="comment" value="Commentaire supplémentaire" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <textarea v-model="createControlForm.comment"
                    id="comment"
                    class="mt-1 block w-full
                    border-zinc-300 
                    focus:border-amber-400 focus:ring-amber-400 
                    rounded-md shadow-sm resize-none"
                    rows="6" />
                    
                    
                    <button type="submit" :class="{ 'opacity-25': createControlForm.processing }"
                    :disabled="createControlForm.processing"
                    class="mb-4 mt-8 bg-amber-400 border-amber-400 text-black font-semibold border-4 py-2 w-full hover:bg-amber-300 hover:border-amber-300">
                    Confirmer
                    </button>

                </form>
                
                <div class="text-center h-20">
                        <button @click="() => {showControlForm = false; showTileContainer = true;}" class="text-red-1 font-semibold">Annuler</button>
                </div>
            </div>

            <!-- MATERIAL FORM -->
            <div id="material-form-container" 
            class="pt-[10vh] pb-[10vh] w-[90vw] lg:w-[35vw]"
            v-show="showMaterialForm" 
            >
                <h2 class="text-center text-2xl font-bold pb-8">Modification du matériel</h2>
                <form id="material-form" @submit.prevent="updateMaterial()">
                    <BreezeLabel value="Hausse" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <!-- make 2 radio buttons yes or no -->
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="updateMaterialForm.rise" type="radio" id="yes" name="rise" value="true" :checked="updateMaterialForm.rise === 1">
                            Oui
                        </label>
                        <label for="no">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="updateMaterialForm.rise" type="radio" id="no" name="rise" value="false"
                             :checked="updateMaterialForm.rise === 0">
                            Non
                        </label>
                    </div>

                    <BreezeLabel for="nb_frames" value="Placement des cadres" class=" font-bold text-base mt-4 lg:mt-0 text-zinc-900 " />
                    <div class="frames-indicator grow flex items-start justify-between pt-[2px] pb-[2px]" >
                        <div v-for="(value, index) in selectedValues" 
                        :key="index"
                        @click="toggleColor(index)"
                        class="flex flex-col gap-1 justify-center items-center">
                            <!-- if value if empty text is "-", if frame "c", and if separator "s"-->

                            <div
                            class="w-4 h-[40px] rounded cursor-pointer"
                            :class="value === 'empty' ? 'bg-[#AFAC99]' : value === 'frame' ? 'bg-amber-400' : 'bg-zinc-900'">
                            </div>

                            <div class="w-4 h-full rounded-md">
                                <!-- if value is empty pprint "-", if frame "c", and if separator "s"-->
                                <p class="text-center text-s font-bold text-zinc-900" :class="value === 'empty' ? 'text-zinc-900' : value === 'frame' ? 'text-white' : 'text-white'">
                                    {{ value === 'empty' ? ' ' : value === 'frame' ? 'c' : 's' }}</p>
                            </div>

                        </div>
                    </div>

                    <button type="submit" :class="{ 'opacity-25': updateMaterialForm.processing }"
                    :disabled="updateMaterialForm.processing"
                    class="mb-4 mt-8 bg-amber-400 border-amber-400 text-black font-semibold border-4 py-2 w-full hover:bg-amber-300 hover:border-amber-300">
                    Confirmer
                    </button>

                    
                </form>
                <div class="text-center">
                        <button @click="() => {showMaterialForm = false; showTileContainer = true;}" class="text-red-1 font-semibold">Annuler</button>
                </div>
            </div>

            <!-- QUEEN FORM -->
            <div id="queen-form-container" 
            class="pt-[10vh] pb-[10vh] w-[90vw] lg:w-[35vw]"
            v-show="showQueenForm">
                <h2 class="text-center text-2xl font-bold pb-8">Relancer la ruche</h2>
                <form id="queen-form" @submit.prevent="activateHive()">
                    <BreezeLabel for="date_queen" value="Date de la reine" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <BreezeInput v-model="updateQueenForm.date_queen" id="date_queen" type="date"
                        class="mt-1 block w-full" required/>

                    <BreezeLabel for="color_queen" value="Couleur de la reine" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <!-- Color picker input-->
                    <div class="color-input-container flex flex-row gap-2 items-center">
                        <input v-model="updateQueenForm.color_queen" 
                        class="mt-1 w-10 h-10 border-zinc-300 
                        focus:border-amber-400 focus:ring-amber-400 
                        rounded-md shadow-sm"
                        type="color" name="color_picker" id="color_queen">
                        
                        <!-- if color queen is not white print value if not print "pas de couleur" in ternary condition-->
                        <p v-if="updateQueenForm.color_queen != '#ffffff'" >Couleur actuelle : {{ updateQueenForm.color_queen }}</p>
                        <p v-else>Aucune couleur</p>


                    </div>

                    <BreezeLabel value="Hausse" class=" font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    
                    <div class="flex items-center gap-4">
                        <label for="yes">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="updateQueenForm.rise" type="radio" id="yes" name="rise" value="true">
                            Oui
                        </label>
                        <label for="no">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="updateQueenForm.rise" type="radio" id="no" name="rise" value="false">
                            Non
                        </label>
                    </div>

                    <BreezeLabel for="nb_frames" value="Placement des cadres" class=" font-bold text-base mt-4 lg:mt-0 text-zinc-900 " />
                    <div class="frames-indicator grow flex items-start justify-between pt-[2px] pb-[2px]" >
                        <div v-for="(value, index) in selectedValues" 
                        :key="index"
                        @click="toggleColor(index)"
                        class="flex flex-col gap-1 justify-center items-center">
                            <!-- if value if empty text is "-", if frame "c", and if separator "s"-->

                            <div
                            class="w-4 h-[40px] rounded cursor-pointer"
                            :class="value === 'empty' ? 'bg-[#AFAC99]' : value === 'frame' ? 'bg-amber-400' : 'bg-zinc-900'">
                            </div>

                            <div class="w-4 h-full rounded-md">
                                <!-- if value is empty pprint "-", if frame "c", and if separator "s"-->
                                <p class="text-center text-s font-bold text-zinc-900" :class="value === 'empty' ? 'text-zinc-900' : value === 'frame' ? 'text-white' : 'text-white'">
                                    {{ value === 'empty' ? ' ' : value === 'frame' ? 'c' : 's' }}</p>
                            </div>

                        </div>
                    </div>

                    <button type="submit" :class="{ 'opacity-25': updateQueenForm.processing }"
                    :disabled="updateQueenForm.processing"
                    class="mb-4 mt-8 bg-amber-400 border-amber-400 text-black font-semibold border-4 py-2 w-full hover:bg-amber-300 hover:border-amber-300">
                    Confirmer
                    </button>
                </form>
                <div class="text-center">
                    <button @click="() => {showQueenForm = false; showTileContainer = true;}" class="text-red-1 font-semibold">Annuler</button>
                </div>
            </div>

            <!-- TREATMENT FORM -->
            <div id="treatment-form-container"
            class="pt-[10vh] pb-[10vh] w-[90vw] lg:w-[35vw]"
            v-show="showTreatmentForm">

                <h2 class="text-center text-2xl font-bold pb-8">Modification du traitement</h2>
                <form id="material-form" @submit.prevent="setTreatment()">
                    
                    <BreezeLabel value="Traitement actif ?" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <!-- make 2 radio buttons yes or no -->
                    <div class="flex items-center gap-4 mt-1">
                        <label for="yes">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="setTreatmentForm.is_active" type="radio" id="yes" name="rise" value="true" 
                            :checked="setTreatmentForm.is_active === 1">
                            Oui
                        </label>
                        <label for="no">
                            <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                            v-model="setTreatmentForm.is_active" type="radio" id="no" name="rise" value="false"
                            :checked="setTreatmentForm.is_active === 0">
                            Non
                        </label>
                    </div>

                    <BreezeLabel v-if="setTreatmentForm.is_active == 'true' || setTreatmentForm.is_active == 1" 
                    value="Type de traitement" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                    <!-- make a select with 2 options : varroas and sickness -->
                    <select v-if="setTreatmentForm.is_active == 'true' || setTreatmentForm.is_active == 1"
                    required
                    v-model="setTreatmentForm.type" class="mt-1 block w-full border-zinc-300
                    focus:border-amber-400 focus:ring-amber-400 rounded-md shadow-sm">
                        <option value="varroas">
                            Varroas
                        </option>
                        <option value="sickness">
                            Maladie
                        </option>
                    </select>

                    <div v-if="setTreatmentForm.is_active == 'true' || setTreatmentForm.is_active == 1">
                        <BreezeLabel value="Intensité du traitement" class="font-bold text-base mt-4 lg:mt-0 text-zinc-900"/>
                        <!-- make 2 radio buttons yes or no -->
                        <div class="flex items-center gap-4 mt-1">
                            <label for="low">
                                <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                                v-model="setTreatmentForm.intensity" type="radio" id="low" name="intensity" value="1" 
                                :checked="setTreatmentForm.intensity === 1">
                                Basse
                            </label>
                            <label for="medium">
                                <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                                v-model="setTreatmentForm.intensity" type="radio" id="medium" name="intensity" value="2"
                                :checked="setTreatmentForm.intensity === 2">
                                Moyenne
                            </label>

                            <label for="high">
                                <input class="border-zinc-300 checked:bg-amber-400 checked:hover:bg-amber-400 focus:bg-amber-400 focus:outline-none focus:ring-1 focus:ring-amber-400 checked:focus:bg-amber-400 checked:active:bg-amber-400 shadow-sm mr-1" 
                                v-model="setTreatmentForm.intensity" type="radio" id="high" name="intensity" value="3"
                                :checked="setTreatmentForm.intensity === 3">
                                Haute
                            </label>
                        </div>
                    </div>

                    <button type="submit" :class="{ 'opacity-25': setTreatmentForm.processing }"
                    :disabled="setTreatmentForm.processing"
                    class="mb-4 mt-8 bg-amber-400 border-amber-400 text-black font-semibold border-4 py-2 w-full hover:bg-amber-300 hover:border-amber-300">
                    Confirmer
                    </button>

                    
                </form>
                <div class="text-center">
                        <button @click="() => {showTreatmentForm = false; showTileContainer = true;}" class="text-red-1 font-semibold">Annuler</button>
                </div>


            </div>

          </div>
        </div>
      </div>
    </transition>
  </template>
  
  <script>

    import { useForm } from "@inertiajs/inertia-vue3";
    import BreezeLabel from "@/Components/InputLabel.vue";
    import BreezeInput from "@/Components/TextInput.vue";
    import Swal from "sweetalert2";
  
    export default {
        emits: ['close'],
        props: ['hive', 'error'],
        //load
        data(props) {

            //console.log(props.hive);

            //make array out of hive.frames_slots to store in selectedValues
            let frames_slots = props.hive.frames_slots.split(',');
            //change values to full words
            frames_slots = frames_slots.map((value) => {
                if (value === 'e') {
                    return 'empty';
                } else if (value === 'c') {
                    return 'frame';
                } else {
                    return 'separator';
                }
            });

            //create variable setTreatmentForm
            let setTreatmentForm = useForm({
                is_active: false,
                type: props.hive.treatment,
                intensity: null,
            });


            //if hive.treatment is 0 then setTreatmentForm.is_active = false
            if (props.hive.treatment === 0 || props.hive.treatment === 'none') {
                setTreatmentForm.is_active = 0;
                setTreatmentForm.intensity = null;
            } else {
                setTreatmentForm.is_active = 1;
                setTreatmentForm.intensity = props.hive.intensity;
            }

            
            //if hive.treatment is 1 then setTreatmentForm.intensity = hive.treatment

            return {

                selectedValues: frames_slots,

                showTileContainer: true,
                showControlForm: false,
                showMaterialForm: false,
                showQueenForm: false,
                showTreatmentForm: false,
                
                createControlForm: useForm({
                    hive_id: props.hive.id,
                    glimpse_queen: null,
                    queen_laid: null,
                    brood: null,
                    frames_full: null,
                    honey: null,
                    honey_rise: null,
                    sealed_honey: null,
                    male_cells: null,
                    eliminate_queen_cells: null,
                    clean_plate: null,
                    nb_varroa: props.hive.nb_varroa,
                    comment: null,
                }),

                updateMaterialForm: useForm({
                    rise: props.hive.rise,
                    frames_slots: frames_slots,
                }),

                updateQueenForm: useForm({
                    date_queen: null,
                    color_queen: "#ffffff",
                    rise: false,
                    frames_slots: frames_slots,
                }),

                setTreatmentForm: setTreatmentForm,
                //set treatment is useform where is active is true if props.hive.treatment is not 0 and set intensity to hive.treatment if not 0
                // setTreatmentForm: useForm({
                //     is_active: false,
                //     intensity: null,
                // }),

            }
        },
        methods: {

            close() {
                this.$emit('close');
                this.showTileContainer = true;
                this.showControlForm = false;
                this.showMaterialForm = false;
                this.showQueenForm = false;
                this.showTreatmentForm = false;

                this.createControlForm.reset();
                this.updateQueenForm.reset();

                this.updateMaterialForm.rise = this.hive.rise;

                let frames_slots = this.hive.frames_slots.split(',');
                //change values to full words
                frames_slots = frames_slots.map((value) => {
                    if (value === 'e') {
                        return 'empty';
                    } else if (value === 'c') {
                        return 'frame';
                    } else {
                        return 'separator';
                    }
                });

                this.selectedValues = frames_slots;


                this.setTreatmentForm.is_active = this.hive.treatment === 'none' ? 0 : 1;
                this.setTreatmentForm.type = this.hive.treatment;
                this.setTreatmentForm.intensity = this.hive.intensity;

            },
            toggleColor(index) {
                const value = this.selectedValues[index];  

                if (value === 'empty') {
                    this.selectedValues[index] = 'frame';
                } else if (value === 'frame') {
                    this.selectedValues[index] = 'separator';
                } else {
                    this.selectedValues[index] = 'empty';
                }

                //Recréer le if au dessus pour gérer le fait que si on clique et passe un input en séparateur, alors les input à sa gauche ou à sa droite dépendament de si le séparateur est sur la première ou la deuxième moitié de la liste repassent en mode empty
                if (this.selectedValues[index] === 'separator') {
                    if (index < this.selectedValues.length / 2) {
                        // if separator is in first half of the list, set all values to empty before the separator
                        for (let i = 0; i < index; i++) {
                            this.selectedValues[i] = 'empty'
                        }
                    } else {
                        for (let i = index + 1; i < this.selectedValues.length; i++) {
                            this.selectedValues[i] = 'empty'
                        }
                    }
                }

                // Si on clique pour ajouter une frame dans la première moitié de la liste il faut s'assurer qu'il n'y a pas de plus loins dans la meme moitié de la liste et inversentant dans la deuxième moitié de la liste
                if (this.selectedValues[index] === 'frame') {
                    if (index < this.selectedValues.length / 2) {
                        // if separator is in first half of the list, set all values to empty before the separator
                        for (let i = index; i < this.selectedValues.length / 2; i++) {
                            if (this.selectedValues[i] === 'separator') {
                                this.selectedValues[index] = 'empty'
                            }
                        }
                    } else {
                        for (let i = index; i > this.selectedValues.length / 2; i--) {
                            if (this.selectedValues[i] === 'separator') {
                                this.selectedValues[index] = 'empty'
                            }
                        }
                    }
                }              

            },

            updateMaterial() {

                if (this.updateMaterialForm.rise == 'true' || this.updateMaterialForm.rise == 1) {
                    this.updateMaterialForm.rise = 1;
                } else {
                    this.updateMaterialForm.rise = 0;
                }

                    //format selectedValues to string to send to backend
                if (this.selectedValues != null) {
                    //format to smaller text, keep only first letter of each word
                    this.updateMaterialForm.frames_slots = this.selectedValues.join(',').replaceAll('empty', 'e').replaceAll('frame', 'c').replaceAll('separator', 's');
                }


                this.updateMaterialForm.put(route('hive.updateMaterial', [this.hive.id, this.hive.apiary_id]), {
                    preserveScroll: true,
                    preserveState: false,
                    onSuccess: () => {
                        this.showMaterialForm = false;
                        this.showTileContainer = true;
                        Swal.fire({
                            icon: 'success',
                            title: 'Succès',
                            text: 'Le matériel a bien été modifié',
                            toast: true,
                            position: 'top-end',
                            showConfirmButton: false,
                            timer: 3500,
                            timerProgressBar: true,
                            didOpen: (toast) => {
                                toast.addEventListener('mouseenter', Swal.stopTimer)
                                toast.addEventListener('mouseleave', Swal.resumeTimer)
                            }
                        });
                    },
                    onError: () => {
                        this.showMaterialForm = false;
                        this.showTileContainer = true;
                        let error = Object.values(this.updateMaterialForm.errors)[0];

                        Swal.fire({
                            icon: 'error',
                            title: 'Erreur',
                            text: error,
                            toast: true,
                            position: 'top-end',
                            showConfirmButton: false,
                            timer: 3500,
                            timerProgressBar: true,
                            didOpen: (toast) => {
                                toast.addEventListener('mouseenter', Swal.stopTimer)
                                toast.addEventListener('mouseleave', Swal.resumeTimer)
                            }
                        });
                    }
                });
            },
            deactivateHive() {
                Swal.fire({
                    title: 'Êtes-vous sûr ?',
                    text: "Vous ne pourrez pas revenir en arrière !",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Oui, désactiver !'
                }).then((result) => {
                    if (result.isConfirmed) {
                        this.updateQueenForm.put(route('hive.deactivateHive', [this.hive.id, this.hive.apiary_id]), {
                            preserveScroll: true,
                            preserveState: false,
                            onSuccess: () => {
                                Swal.fire(
                                    'Désactivé !',
                                    'La ruche a bien été désactivée.',
                                    'success'
                                );
                                this.close();
                            },
                        });
                    }
                })
            },
            removeFood() {
                Swal.fire({
                    title: 'Retirer la nourriture ?',
                    text: "Vous ne pourrez pas revenir en arrière !",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Oui, retirer !'
                }).then((result) => {
                    if (result.isConfirmed) {
                        this.updateQueenForm.put(route('hive.removeFood', [this.hive.id, this.hive.apiary_id]), {
                            preserveScroll: true,
                            preserveState: false,
                            onSuccess: () => {
                                Swal.fire(
                                    'Retiré !',
                                    'La nourriture a bien été retirée.',
                                    'success'
                                );
                                this.close();
                            },
                        });
                    }
                })
            },
            addFood() {
                Swal.fire({
                    title: 'Nourrir la ruche ?',
                    text: "Vous ne pourrez pas revenir en arrière !",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Oui, ajouter !'
                }).then((result) => {
                    if (result.isConfirmed) {
                        this.updateQueenForm.put(route('hive.addFood', [this.hive.id, this.hive.apiary_id]), {
                            preserveScroll: true,
                            preserveState: false,
                            onSuccess: () => {
                                Swal.fire(
                                    'Ajouté !',
                                    'La nourriture a bien été ajoutée.',
                                    'success'
                                );
                                this.close();
                            }, onError: () => {
                                this.showTileContainer = true;
                                let error = Object.values(this.updateQueenForm.errors)[0];

                                Swal.fire({
                                    icon: 'error',
                                    title: 'Erreur',
                                    text: error,
                                    toast: true,
                                    position: 'top-end',
                                    showConfirmButton: false,
                                    timer: 3500,
                                    timerProgressBar: true,
                                    didOpen: (toast) => {
                                        toast.addEventListener('mouseenter', Swal.stopTimer)
                                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                                    }
                                });
                            }
                        });
                    }
                })
            },
            activateHive() {

                this.updateQueenForm.rise = this.updateQueenForm.rise === 'true' ? 1 : 0;
                
                //format selectedValues to string to send to backend
                if (this.selectedValues != null) {

                    //format to smaller text, keep only first letter of each word
                    this.updateQueenForm.frames_slots = this.selectedValues.join(',').replaceAll('empty', 'e').replaceAll('frame', 'c').replaceAll('separator', 's');

                }

                this.updateQueenForm.put(route('hive.activateHive', [this.hive.id, this.hive.apiary_id]), {
                    preserveScroll: true,
                    preserveState: false,
                    onSuccess: () => {
                        this.showQueenForm = false;
                        this.showTileContainer = true;
                        Swal.fire({
                            icon: 'success',
                            titel: 'Activé !',
                            text: 'La ruche a bien été activée.',
                            toast: true,
                            position: 'top-end',
                            showConfirmButton: false,
                            timer: 3500,
                            timerProgressBar: true,
                            didOpen: (toast) => {
                                toast.addEventListener('mouseenter', Swal.stopTimer)
                                toast.addEventListener('mouseleave', Swal.resumeTimer)
                            }
                        });
                        this.close();
                    },onError: () => {
                        this.showQueenForm = false;
                        this.showTileContainer = true;
                        let error = Object.values(this.updateQueenForm.errors)[0];

                        Swal.fire({
                            icon: 'error',
                            title: 'Erreur',
                            text: error,
                            toast: true,
                            position: 'top-end',
                            showConfirmButton: false,
                            timer: 3500,
                            timerProgressBar: true,
                            didOpen: (toast) => {
                                toast.addEventListener('mouseenter', Swal.stopTimer)
                                toast.addEventListener('mouseleave', Swal.resumeTimer)
                            }
                        });
                    }
                });
            },
            setTreatment() {

                //console.log(this.setTreatmentForm);
                
                if (this.setTreatmentForm.is_active == 1 || this.setTreatmentForm.is_active == 'true' ) {

                    this.setTreatmentForm.is_active =  1;
                    this.setTreatmentForm.intensity = parseInt(this.setTreatmentForm.intensity);

                } else {

                    this.setTreatmentForm.is_active = 0;
                    this.setTreatmentForm.intensity = 0;
                    this.setTreatmentForm.type = 'none';

                }

                console.log(this.setTreatmentForm);


                this.setTreatmentForm.put(route('hive.setTreatment', [this.hive.id, this.hive.apiary_id]), {
                    preserveScroll: true,
                    preserveState: false,
                    onSuccess: () => {
                        this.showTreatmentForm = false;
                        this.showTileContainer = true;
                        Swal.fire({
                            icon: 'success',
                            title: 'Succès',
                            text: 'Le traitement a bien été modifié',
                            toast: true,
                            position: 'top-end',
                            showConfirmButton: false,
                            timer: 3500,
                            timerProgressBar: true,
                            didOpen: (toast) => {
                                toast.addEventListener('mouseenter', Swal.stopTimer)
                                toast.addEventListener('mouseleave', Swal.resumeTimer)
                            }
                        });
                        this.close();
                    },
                });
            },
            newControl() {
                //convert boolean to int if not null
                if (this.createControlForm.glimpse_queen !== null) {
                    this.createControlForm.glimpse_queen = this.createControlForm.glimpse_queen === 'true' ? 1 : 0;
                }

                if (this.createControlForm.queen_laid !== null) {
                    this.createControlForm.queen_laid = this.createControlForm.queen_laid === 'true' ? 1 : 0;
                }

                if (this.createControlForm.brood !== null) {
                    this.createControlForm.brood = this.createControlForm.brood === 'true' ? 1 : 0;
                }

                if (this.createControlForm.frames_full !== null) {
                    this.createControlForm.frames_full = this.createControlForm.frames_full === 'true' ? 1 : 0;
                }

                if (this.createControlForm.honey !== null) {
                    this.createControlForm.honey = this.createControlForm.honey === 'true' ? 1 : 0;
                }

                if (this.createControlForm.honey_rise !== null) {
                    this.createControlForm.honey_rise = this.createControlForm.honey_rise === 'true' ? 1 : 0;
                }

                if (this.createControlForm.sealed_honey !== null) {
                    this.createControlForm.sealed_honey = this.createControlForm.sealed_honey === 'true' ? 1 : 0;
                }

                if (this.createControlForm.male_cells !== null) {
                    this.createControlForm.male_cells = this.createControlForm.male_cells === 'true' ? 1 : 0;
                }

                if (this.createControlForm.eliminate_queen_cells !== null) {
                    this.createControlForm.eliminate_queen_cells = this.createControlForm.eliminate_queen_cells === 'true' ? 1 : 0;
                }

                if (this.createControlForm.clean_plate !== null) {
                    this.createControlForm.clean_plate = this.createControlForm.clean_plate === 'true' ? 1 : 0;
                }


                this.createControlForm.post(route('interventionControl.store'), {
                    preserveScroll: true,
                    preserveState: false,
                    onSuccess: () => {
                        this.showControlForm = false;
                        this.showTileContainer = true;
                        Swal.fire({
                            icon: 'success',
                            title: 'Succès',
                            text: 'Le contrôle a bien été ajouté',
                            toast: true,
                            position: 'top-end',
                            showConfirmButton: false,
                            timer: 3500,
                            timerProgressBar: true,
                            didOpen: (toast) => {
                                toast.addEventListener('mouseenter', Swal.stopTimer)
                                toast.addEventListener('mouseleave', Swal.resumeTimer)
                            }
                        });
                    },
                });
            }
        },
        components: {
            BreezeLabel,
            BreezeInput,
        }
  }
  </script>
  
  <style scoped>
  .fade-enter-active,
  .fade-leave-active {
    transition: opacity 0.3s ease;
  }
  
  .fade-enter-from,
  .fade-leave-to {
    opacity: 0;
  }
  </style>